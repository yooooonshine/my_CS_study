일반적으로 웹 애플리케이션 서버를 직접 구현한다면 어떤 작업을 해야할까?
![[Pasted image 20240218222505.png]]
1. 서버 TCP/IP 연결 대기, 소켓 연결
2. http 요청 메세지를 파싱해서 읽기
3. http 메서드 파악(get, post 등), save인지등 파악
4. Content-Type 파악
5. http 메시지 바디 내용 파싱
6. 프로세스 실행
7. 비즈니스 로직 실행
8. http 응답 메세지 생성
9. TCP/IP에ㅐ 응답전달, 소켓 종료
등의 과정이 필요하다. 

여기서 Content-Type이란 어떤 방식으로 Body가 구성되어있냐를 의미하며 Content-Type을 통해 body를 읽는다.

근데 여기서 비즈니스로직을 작성하는 것 이외에는 공통적인 작업이라, 프로젝트마다 이를 다시 작성하는 것은 매우 귀찮은 일이다.
 이러한 공통작업을 WAS가 지원하는 서블릿에서 처리해준다.

스프링에서는 다음과 같다.
![[Pasted image 20240218222810.png]]
`/hello`로 요청이 오면 기본적으로 서블릿이 공통작업을 처리를 해주고 개발자가 작성한 비즈니스 로직을 처리해준다.
*  HttpServletRequest는 요청을 파싱하여, 사용하기 쉽게 만들어준다. 예를 들어 `request.userName`등으로 값을 가져올 수 있다.
* HttpServletResponse는 응답 정보를 편리하게 만들 수 있다.

![[Pasted image 20240218223239.png]]
사진을 통해 설명을 하자면,
`/hello`로 요청이 온다면 , was가 requst와 response를 만들어 위에서 만든 was의 helloservlet에 건넨다.
helloservlet은 request를 읽고, response에 값을 넣어 다시 was로 보내면 response를 기반으로 was가 응답을 생성하여 요청에 응답한다.

그럼 이러한 서블릿들은 누가 관리해줄까?
바로 was에 있는 서블릿 컨테이너가 관리해준다.
서블릿 컨테이너는 서블릿 객체를 생성해주며, 각 요청에 맞는 servlet을 제공해주며, was가 종료될 때 서블릿 객체 또한 소멸될 수 있도록 해준다.
* 서블릿 객체는 싱글톤으로 관리된다. 즉 동일한 요청에 대해서는 서블릿 객체가 재활용된다. 이로써 객체를 다시 생성할 필요없어 효율성이 증대된다.
* 또한 싱글톤으로 작성해도 문제될 게 없는 게 변하는 정보는 request와 response에 담겨 있으므로, 서블릿의 로직 자체는 같이 사용해도 무관하기 때문이다.
* 동시 요청을 위한 멀티 쓰레드 처리도 지원해준다.