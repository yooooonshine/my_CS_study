* ## Cryptography & Cryptocurrencies(암호화, 암호화폐)
	* 암호화는 Search puzzle이다.
		*  H
			* hash function이다.
			* 비트코인에서 H는 SHA-256을 사용한다.
		* value x
			* 채굴자가 바꾸는 값
		* id
			* transaction
		* a target set Y
			* 결과가 Y보다 작아야함
		* H(id + x) <= Y이다
	* Hash pointer
		* hash pointer는 특정 정보를 가리키는 포인터이다.
		* 즉 이전 block의 hash값이다.
		* 즉 정보를 찾아주며
		* 그 정보가 바뀌지 않았는 지 확인해준다.
		* x에는 이전 블럭의 hash값이 같이 들어간다.
	* block-chain은 이렇게 pointer아닌 이전 블럭의 hash값으로 이전 블럭을 가리키는 linked list이다.
		* 참고로 block에 있는 정보는 데이터와 해쉬값을 함께 해쉬한 것이 아닌, 그대로 저장한다.
* ## Digital signature scheme(디지털 서명 계획)
	* 이는 3개의 알고리즘으로 구성된다.
		* 1.![[Pasted image 20231016212459.png]]
			* sk는 private key
			* pk는 public key
			* keysize는 이 private key, public key 세트를 얼마나 만들 것인지
			* 이를 통해서 sk, pk를 만들 수 있다.
		* 2.![[Pasted image 20231016212613.png]]
			* 비밀키와 메세지로 서명을 하는 것
		* 3.![[Pasted image 20231016212705.png]]
			* public key와 메세지, sig를 이용하여 sig가 타당하면 true, 아니면 false를 리턴
* ## ECDSA(Elliptic Curve Digital Signature Algorithm)
	* 이는 대략 128 bit 대칭 키 보안 정도의 성능을 갖는다(AES 128정도)
	* private key: 256bit
	* public key:  512bit
		* 실은 public key를 해쉬한 값
			* 블록체인은 분산 원장이며, 트랜잭션 정보가 공개적으로 저장됩니다. Public key를 직접 노출시키지 않고 해시값을 사용함으로써 사용자의 개인 정보를 보호할 수 있습니다. Public key를 직접 노출시키면 해당 주소의 모든 거래 내역과 잔고가 공개적으로 확인 가능하므로, Public key의 노출을 방지합니다.
			* 또한 해시한 public key를 사용하기에 주소의 길이를 줄일 수 있다.
	* Message to be signed: 256bit(이는 message를 SHA256을 통해 해쉬한 값)
	* Signature: 512bit
		* 서명이 굉장히 길기에 공동서명같은 경우에는 많은 메모리를 차지하게 된다.
* coin base transaction
	* 이는 채굴하면서 받게 되는 코인, 즉 input이 필요가 없다. 주는 사람이 없기에
* ![[Pasted image 20231016214108.png]]
	* 이를 보면 오른쪽에서 1번은 input이 존재하지 않는다. 채굴한 것이기에
	* 4번을 보면, Inputs: 2\[1] 이라고 적혀 있는데, 이는 2번 거래에서 1번 인덱스를 사용한다는 것.
	* 참고로 transaction을 할때에는 input의 모든 금액을 소모해야한다. 즉 쓰고 남은 돈은 나한테 보내야한다.
	* ##### transaction fee = inputs - outputs
* ## Transaction의 형태
	* ![[Pasted image 20231016214852.png]]
		* 다른 한 사람한테 보내고 나머지는 내가 받는 것
	* ![[Pasted image 20231016214903.png]]
		* 여러 계좌를 합쳐서 지불하는 것
	* ![[Pasted image 20231016214912.png]]
		* 여러 사람한테 지불하는 것

* a full node 클라이언트를 사용하는 wallet Application은 블록체인내의 모든 transaction에서 사용되지 않은 output을 저정해놔야한다.
* 허나 개인 wallet은 이를 모두 저장하지 않고 user에 관한 output만 저장한다.
* 비트코인으로 커피값을 계산하는 데에는 분명, double spend 위험이 있다. 즉 점원에게 돈을 지불하는 bob이 사기를 칠  수 도 있다. 허나 이건 매우 작은 돈이므로, 굳이 사기를 치지 않는다.
	* 즉 액수가 크면, transaction을 채결해도 바로 가게 할 수없다. 즉 6블럭정도는 기다리게 해야한다.


* ## Transaction Outputs and Inputs
	* #### UTXO
		* unspent transaction outputs
		* 이런 UTXO들의 집합을 UTXO set이라 한다.
		* miner들은 stxo는 관리 안하고 utxo만 관리한다. 즉 utxo는 모두 가지고 있다.
	* #### STXO
		* spent transaction outputs
* ## 1 BTC = 10^8 satoshis 이다. 
	* 즉 비트코인은 작게 쪼갤 수 있고,
	* 가장 작은 단위는 satoshis이다.


* ![[Pasted image 20231017013220.png]]
	* 맨 위의 "vin"은 transaction input을 의미
	* txid(transaction id)는 해당 UTXO가 있는 transaction의 포인터
	* vout은 해당 UTXO가 몇번쨰에 있는지(한 transaction안에 여러 목적지가 있음)
	* scriptSig는 unlocking script
	* sequence는 replace-by-fee로 transaction이 수용안될 때, 더 높은 가격으로 재전송을 허락하는 시그널이나 현재는 사용안한다. 왜냐면 요즘은 walley이 알아서 transaction fee를 맞춰주기에.
	* 밑의 "vout"은 transaction output을 의미
	* scriptPubKey는 상대방이 BTC를 받기 위해 풀어야 하는 조건.
	* 과정
		* txid에 적힌 주소에서 scriptPubKey를 가져오고, 이를 scriptSig를 사용하여 푼다.
	* 


* ## 튜링 불완전
	* 비트코인  script languege를 사용하며, 이는 튜링 불완전하다.
	* 튜링 불완전하다는 것은 for, if문등을 사용할 수 없다는 것.
	* 즉 매우 가벼운언어라는 것
	* 비트코인이 튜링불완전을 채택한 이유는 누군가 무한루프를 만들어, 시스템을 과부하 시킬 수 도 있기에
	* 


* ## Locking script, Unlocking script4
	* locking script
		* ![[Pasted image 20231017014732.png]]
		* 이는 scriptPubKey와 같은 의미이며 output에 들어있는 spending condition입니다. 즉, 누군가 보낸 BTC를 받기위해 풀어야 하는 조건으로 볼 수 있습니다. scriptPubKey로 불리는 이유는 주로 public key 또는 비트코인 주소를 포함하기 때문입니다.
		* 이 안을 보면 DUP(복제)연산, 후 이를 스택에서 꺼내 HASH하고, public key를 스택에 넣는 과정이 존재한다.
	* unlocking script
		* ![[Pasted image 20231017015204.png]]
		* 이는 scriptSig와 같은 의미이며, vin에서 누군가가 준 비트코인을 사용하기 위해, locking script를 풀기 위한 것.
		* 왜 scriptSig냐면 이는 디지털 서명을 포함하고 있기 떄문이다.
		* 